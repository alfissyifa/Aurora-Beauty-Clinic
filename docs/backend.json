{
  "entities": {
    "Service": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Service",
      "type": "object",
      "description": "Represents a beauty service offered by the Aurora Beauty Clinic.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the service.",
          "format": "uuid"
        },
        "title": {
          "type": "string",
          "description": "Title of the service (e.g., Facial Glow)."
        },
        "description": {
          "type": "string",
          "description": "Detailed description of the service."
        },
        "price": {
          "type": "number",
          "description": "Price of the service."
        },
        "image": {
          "type": "string",
          "description": "URL of the image representing the service.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "title",
        "description",
        "price",
        "image"
      ]
    },
    "Testimonial": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Testimonial",
      "type": "object",
      "description": "Represents a customer testimonial for the Aurora Beauty Clinic.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the testimonial.",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "description": "Name of the customer providing the testimonial."
        },
        "rating": {
          "type": "number",
          "description": "Rating given by the customer (1-5).",
          "format": "integer",
          "items": {
            "type": "number"
          }
        },
        "comment": {
          "type": "string",
          "description": "Text of the testimonial comment."
        },
        "image": {
          "type": "string",
          "description": "URL of the customer's image (optional).",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "name",
        "rating",
        "comment"
      ]
    },
    "Appointment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Appointment",
      "type": "object",
      "description": "Represents a consultation appointment booked by a customer.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the appointment.",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "description": "Name of the customer booking the appointment."
        },
        "phone": {
          "type": "string",
          "description": "Phone number of the customer."
        },
        "email": {
          "type": "string",
          "description": "Email address of the customer.",
          "format": "email"
        },
        "service": {
          "type": "string",
          "description": "Name of the service selected for the appointment."
        },
        "date": {
          "type": "string",
          "description": "Date of the appointment.",
          "format": "date-time"
        },
        "note": {
          "type": "string",
          "description": "Additional notes or comments from the customer."
        },
        "status": {
            "type": "string",
            "description": "The processing status of the appointment.",
            "enum": ["pending", "processed"]
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the appointment was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "phone",
        "email",
        "service",
        "date",
        "status",
        "createdAt"
      ]
    },
    "PageContent": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Page Content",
        "type": "object",
        "description": "Represents editable content for a specific page.",
        "properties": {
          "title": { "type": "string", "description": "Main title of the page." },
          "subtitle": { "type": "string", "description": "Subtitle or tagline for the page." },
          "paragraph1": { "type": "string", "description": "First main paragraph of content." },
          "paragraph2": { "type": "string", "description": "Second main paragraph of content." }
        },
        "required": ["title", "subtitle", "paragraph1", "paragraph2"]
      },
      "ContactInfo": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Contact Info",
        "type": "object",
        "description": "Represents the contact information for the clinic.",
        "properties": {
          "address": { "type": "string", "description": "The clinic's physical address." },
          "phone": { "type": "string", "description": "The clinic's phone number." },
          "email": { "type": "string", "description": "The clinic's contact email.", "format": "email" },
          "hours": { "type": "string", "description": "The clinic's hours of operation." },
          "mapIframe": { "type": "string", "description": "The HTML iframe code for the location map." }
        },
        "required": ["address", "phone", "email", "hours", "mapIframe"]
    },
    "Doctor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Doctor",
      "type": "object",
      "description": "Represents an expert or doctor at the clinic.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the doctor." },
        "name": { "type": "string", "description": "Full name and title of the doctor." },
        "specialty": { "type": "string", "description": "The doctor's area of specialty." },
        "bio": { "type": "string", "description": "A short biography of the doctor." },
        "image": { "type": "string", "description": "URL for the doctor's portrait.", "format": "uri" },
        "imageHint": { "type": "string", "description": "A hint for AI image generation (e.g., 'female doctor')." }
      },
      "required": ["id", "name", "specialty", "bio", "image"]
    },
    "GalleryImage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Gallery Image",
      "type": "object",
      "description": "Represents an image in the website's gallery.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the gallery image." },
        "imageUrl": { "type": "string", "description": "URL of the image.", "format": "uri" },
        "description": { "type": "string", "description": "Description or alt text for the image." },
        "imageHint": { "type": "string", "description": "A hint for AI image generation (e.g., 'clinic interior')." },
        "createdAt": { "type": "string", "description": "Timestamp for ordering.", "format": "date-time" }
      },
      "required": ["id", "imageUrl", "description"]
    },
    "Admin": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Admin",
      "type": "object",
      "description": "Represents an administrator user with access to the dashboard.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The user's unique ID from Firebase Authentication."
        },
        "email": {
          "type": "string",
          "description": "The admin user's email address.",
          "format": "email"
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the admin account was created.",
          "format": "date-time"
        },
        "role": {
            "type": "string",
            "description": "The role of the user, must be 'admin'.",
            "enum": ["admin"]
        }
      },
      "required": ["uid", "email", "createdAt", "role"]
    },
    "User": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "User",
        "type": "object",
        "description": "Represents a general user.",
        "properties": {
          "uid": {
            "type": "string",
            "description": "The user's unique ID from Firebase Authentication."
          },
          "email": {
            "type": "string",
            "description": "The user's email address.",
            "format": "email"
          },
          "createdAt": {
            "type": "string",
            "description": "Timestamp indicating when the user account was created.",
            "format": "date-time"
          },
          "role": {
              "type": "string",
              "description": "The role of the user, e.g., 'user'.",
              "enum": ["user"]
          }
        },
        "required": ["uid", "email", "createdAt", "role"]
      }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/services/{serviceId}",
        "definition": {
          "entityName": "Service",
          "schema": {
            "$ref": "#/entities/Service"
          },
          "description": "Stores details about beauty services offered by the clinic. Read-only access from the frontend.",
          "params": [
            {
              "name": "serviceId",
              "description": "Unique identifier for the service."
            }
          ]
        }
      },
      {
        "path": "/testimonials/{testimonialId}",
        "definition": {
          "entityName": "Testimonial",
          "schema": {
            "$ref": "#/entities/Testimonial"
          },
          "description": "Stores customer testimonials. Read-only access from the frontend.",
          "params": [
            {
              "name": "testimonialId",
              "description": "Unique identifier for the testimonial."
            }
          ]
        }
      },
      {
        "path": "/appointments/{appointmentId}",
        "definition": {
          "entityName": "Appointment",
          "schema": {
            "$ref": "#/entities/Appointment"
          },
          "description": "Stores appointment booking data. Write-only access from the backend via Cloud Functions.",
          "params": [
            {
              "name": "appointmentId",
              "description": "Unique identifier for the appointment."
            }
          ]
        }
      },
       {
        "path": "/pages/{pageId}",
        "definition": {
          "entityName": "PageContent",
          "schema": { "$ref": "#/entities/PageContent" },
          "description": "Stores editable content for various pages like 'About Us'. For contact info, use the 'ContactInfo' entity. Publicly readable, admin writable.",
          "params": [
            { "name": "pageId", "description": "Unique identifier for the page (e.g., 'about', 'contact')." }
          ]
        }
      },
      {
        "path": "/doctors/{doctorId}",
        "definition": {
          "entityName": "Doctor",
          "schema": { "$ref": "#/entities/Doctor" },
          "description": "Stores profiles of doctors and experts. Publicly readable, admin writable.",
          "params": [
            { "name": "doctorId", "description": "Unique identifier for the doctor." }
          ]
        }
      },
      {
        "path": "/gallery/{imageId}",
        "definition": {
          "entityName": "GalleryImage",
          "schema": { "$ref": "#/entities/GalleryImage" },
          "description": "Stores images for the website gallery. Publicly readable, admin writable.",
          "params": [
            { "name": "imageId", "description": "Unique identifier for the gallery image." }
          ]
        }
      },
      {
        "path": "/xxadminxx/{adminId}",
        "definition": {
          "entityName": "Admin",
          "schema": {
            "$ref": "#/entities/Admin"
          },
          "description": "Stores administrator user data. Only writable during account creation.",
          "params": [
            {
              "name": "adminId",
              "description": "The UID of the administrator user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/entities/User"
          },
          "description": "Stores general user data.",
          "params": [
            {
              "name": "userId",
              "description": "The UID of the user."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support the Aurora Beauty Clinic application, focusing on services, testimonials, and appointment bookings.  The structure prioritizes security, scalability, and ease of maintenance.\n\nAuthorization Independence is achieved by ensuring that authorization rules rely solely on `request.auth.uid` where necessary (though the current entities do not require user-based authorization). Since there are no user roles or specific ownership requirements defined in the provided entities or app requirements, Authorization Independence is not explicitly needed. However, should access controls be added later, denormalization should be considered.\n\nQAPs (Rules are not Filters) are supported through structural segregation.  The `services` and `testimonials` collections are designed to be read-only from the frontend, ensuring data integrity and preventing unauthorized modifications. The `appointments` collection is write-only from the backend via Cloud Functions, further isolating access and enforcing controlled data creation. All documents in each collection share the same security requirements, simplifying rule definitions.\n\nExplicit state modeling is not needed in this case since we don't have any state transitions (e.g. DRAFT -> PUBLISHED). The entities defined are relatively straightforward, and no complex state is indicated in the application requirements."
  }
}
